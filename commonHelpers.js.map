{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nconst API_KEY = '43967749-ce2f7a1bd8d115ad659da346f';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(BASE_URL, { params });\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n}","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport simpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\nconst loader = document.getElementById('loader');\nconst gallery = document.querySelector('.gallery');\nconst loadmoreBtn = document.querySelector('.load-more');\n\nexport function renderImages(images, append = false) {\n  const imageMarkup = images\n    .map(\n      img => `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${img.webformatURL}\">\n        <img \n          class=\"gallery-image\" \n          width=\"360\"\n          src=\"${img.largeImageURL}\" \n          alt=\"${img.tags}\" \n          />\n          \n      </a>\n      <ul class='description'>\n      <li><strong>Likes</strong> ${img.likes}</li>\n      <li><strong>Views</strong> ${img.views}</li>\n      <li><strong>Comments</strong> ${img.comments}</li>\n      <li><strong>Downloads</strong> ${img.downloads}</li>\n      </ul>\n    </li>`\n    )\n    .join('');\n\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', imageMarkup);\n  } else {\n    gallery.innerHTML = imageMarkup;\n  }\n\n  initializeLightbox();\n}\n\nexport function showError(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n  });\n}\n\nexport function showLoader() {\n  loader.style.display = 'block';\n  loadmoreBtn.insertAdjacentElement('afterend', loader);\n}\n\nexport function hideLoader() {\n  loader.style.display = 'none';\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nfunction initializeLightbox() {\n  if (lightbox) {\n    lightbox.destroy();\n  }\n  lightbox = new simpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n}\n\nexport function refreshLightbox() {\n  if (lightbox) {\n    lightbox.refresh();\n  }\n}\n\nexport function showLoaderBtn() {\n  loadmoreBtn.style.display = 'block';\n}\n\nexport function hideLoaderBtn() {\n  loadmoreBtn.style.display = 'none';\n}\n\nexport function smoothScrollToNextGroup() {\n  const galleryItemHeight = document\n    .querySelector('.gallery-item')\n    .getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n}","'use strict';\n\nimport { fetchImages } from './js/pixabay-api';\nimport {\n  renderImages,\n  showError,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  refreshLightbox,\n  showLoaderBtn,\n  hideLoaderBtn,\n  smoothScrollToNextGroup,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst searchInput = document.querySelector('.search-img-input');\nconst loadmoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nlet totalHits = 0;\n\nform.addEventListener('submit', handleSubmit);\nloadmoreBtn.addEventListener('click', handleLoadMore);\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n\n  query = searchInput.value.trim();\n  page = 1;\n\n  if (!query) {\n    showError('Please enter a search term');\n    return;\n  }\n\n  clearGallery();\n  hideLoaderBtn();\n  showLoader();\n\n  try {\n    const { hits, totalHits: total } = await fetchImages(query, page);\n    hideLoader();\n    totalHits = total;\n\n    if (hits.length === 0) {\n      showError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    } else {\n      renderImages(hits);\n\n      if (hits.length < 15 || total <= page * 15) {\n        hideLoaderBtn();\n        showEndMessage();\n      } else {\n        showLoaderBtn();\n      }\n    }\n  } catch (error) {\n    hideLoader();\n    showError('An error occured while fetching images');\n    console.error(error);\n  }\n}\n\nasync function handleLoadMore() {\n  page += 1;\n  showLoader();\n\n  try {\n    const { hits } = await fetchImages(query, page);\n    hideLoader();\n    renderImages(hits, true);\n    refreshLightbox();\n    smoothScrollToNextGroup();\n\n    if (hits.length < 15 || totalHits <= page * 15) {\n      hideLoaderBtn();\n      showError(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    hideLoader();\n    showError('An error occured while fetching more images');\n    console.error(error);\n  }\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","params","response","axios","error","lightbox","loader","gallery","loadmoreBtn","renderImages","images","append","imageMarkup","img","initializeLightbox","showError","message","iziToast","showLoader","hideLoader","clearGallery","simpleLightbox","refreshLightbox","showLoaderBtn","hideLoaderBtn","smoothScrollToNextGroup","galleryItemHeight","form","searchInput","totalHits","handleSubmit","handleLoadMore","event","hits","total"],"mappings":"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"}